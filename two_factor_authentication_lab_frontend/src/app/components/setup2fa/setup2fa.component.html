<h2>Set Up 2-Factor Authentication</h2>
<p>Scan the QR code below with your authenticator app, or manually enter the token.</p>

<div *ngIf="qrImage">
  <img [src]="qrImage" alt="QR Code for 2FA" />
</div>

<p *ngIf="token">Or manually enter this token: <strong>{{ token }}</strong></p>

<div *ngIf="setupError" class="error">
  {{ setupError }}
</div>

<div>
  <h3>Two-Factor Authentication Setup</h3>
  <p>Enter the 2FA code generated by your authenticator app to verify and complete setup.</p>

  <form (ngSubmit)="verifyCode()">
    <label for="code">Verification Code</label>
    <input type="text" id="code" [(ngModel)]="code" name="code" required />
    <button type="submit">Verify 2FA</button>
  </form>

  <p *ngIf="message">{{ message }}</p>

  <div *ngIf="backupCodes && backupCodes.length > 0">
    <h4>Your Backup Codes</h4>
    <p>Save these backup codes securely. You can use them if you lose access to your authenticator app.</p>
    <ul>
      <li *ngFor="let backupCode of backupCodes">{{ backupCode }}</li>
    </ul>
    <!-- <button (click)="navigateToLogin()">Navigate to login via 2FA</button> -->
  </div>
  <p>After verifying, changes will be available on the next login</p>
  <button (click)="logout()">Logout</button>
</div>